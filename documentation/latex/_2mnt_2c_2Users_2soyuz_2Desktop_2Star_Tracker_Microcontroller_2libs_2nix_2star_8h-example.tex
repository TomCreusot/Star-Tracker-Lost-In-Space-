\hypertarget{_2mnt_2c_2Users_2soyuz_2Desktop_2Star_Tracker_Microcontroller_2libs_2nix_2star_8h-example}{}\section{/mnt/c/\+Users/soyuz/\+Desktop/\+Star\+\_\+\+Tracker\+\_\+\+Microcontroller/libs/nix/star.\+h}
This is for storing the position and magnitude of a star. it is essentialy a util point which is sortable.

const uint max\+\_\+num\+\_\+stars = 1000; const uint index\+\_\+ra = 10, index\+\_\+dec = 12, index\+\_\+mag = 100; Array\+List$<$\+Star, max\+\_\+num\+\_\+stars$>$ stars; Stars\+From\+C\+SV(\char`\"{}file.\+csv\char`\"{}, index\+\_\+ra, index\+\_\+dec, index\+\_\+mag, \&stars); stars.\+Sort(star\+\_\+tracker\+::\+Star\+::\+Sort\+By\+Magnitude);

\begin{DoxyAuthor}{Author}
Tom Creusot
\end{DoxyAuthor}

\begin{DoxyCodeInclude}

\textcolor{preprocessor}{#pragma once}

\textcolor{preprocessor}{#include <list>}
\textcolor{preprocessor}{#include <vector>}
\textcolor{preprocessor}{#include <string>}
\textcolor{preprocessor}{#include <fstream>}

\textcolor{preprocessor}{#include "\hyperlink{util_8h}{libs/util/util.h}"}
\textcolor{preprocessor}{#include "\hyperlink{array__list_8h}{libs/util/array\_list.h}"}
\textcolor{preprocessor}{#include "\hyperlink{point_8h}{libs/util/point.h}"}


\textcolor{keyword}{using namespace }\hyperlink{namespacestd}{std};
\textcolor{keyword}{using namespace }\hyperlink{namespaceutil}{util};


\textcolor{keyword}{namespace }\hyperlink{namespacestar__tracker}{star\_tracker}
\{

\textcolor{keyword}{class }Star
\{
\textcolor{keyword}{public}:
    \hyperlink{classutil_1_1Point}{util::Point<util::decimal>} position;
    util::decimal magnitude;

    Star (  )
    \{
        position.\hyperlink{classutil_1_1Point_aacd055853a71c08675e1210ee7d7777b}{x} = 0;
        position.\hyperlink{classutil_1_1Point_abf5df9373ece02d9b87f367cf12dd319}{y} = 0;
        magnitude = 0;
    \}


    Star ( util::decimal ra, util::decimal dec, util::decimal mag  )
    \{
        position.\hyperlink{classutil_1_1Point_aacd055853a71c08675e1210ee7d7777b}{x} = ra;
        position.\hyperlink{classutil_1_1Point_abf5df9373ece02d9b87f367cf12dd319}{y} = dec;
        magnitude = mag;
    \}


    \textcolor{keyword}{template}<const u\textcolor{keywordtype}{int} N>
    \textcolor{keyword}{static} \textcolor{keywordtype}{void} StarsFromCSV (  \textcolor{keywordtype}{string}& file, \textcolor{keyword}{const} decimal cutoff\_mag,
                                \textcolor{keyword}{const} uint ra, \textcolor{keyword}{const} uint dec, \textcolor{keyword}{const} uint mag,
                                \hyperlink{classutil_1_1ArrayList}{ArrayList<Star, N>}* star\_list )
    \{
    \textcolor{comment}{//  file = "hygdata\_v3.csv";}
        ifstream strm;
        strm.open(file, std::ifstream::in);

        \textcolor{keywordtype}{string} line;
        std::vector<string> columns;

        \textcolor{keywordflow}{while} ( getline(strm, line) )
        \{
            columns = std::vector<string>();
            Split(\textcolor{charliteral}{','}, line, &columns);


            \textcolor{keywordflow}{try}
            \{
                util::decimal x     = std::stod(columns[ra]);
                util::decimal y     = std::stod(columns[dec]);
                util::decimal m     = std::stod(columns[mag]);
                \textcolor{keywordflow}{if} ( m < cutoff\_mag)
                \{
                    Star s(x, y, m);
                    columns = std::vector<string>();
                    star\_list->\hyperlink{classutil_1_1ArrayList_a75e2f1682ebe7a982b6fd301d416d536}{PushBack}(s);
                \}
            \}
            \textcolor{keywordflow}{catch} ( invalid\_argument ) \{\}
        \}

        strm.close();
    \}



    \textcolor{keyword}{static} \textcolor{keywordtype}{void} Split ( \textcolor{keywordtype}{char} token, \textcolor{keywordtype}{string} in, vector<string>* out )
    \{
        \textcolor{keywordtype}{string} str;

        \textcolor{keywordflow}{for} ( uint i = 0; i < in.size(); i++ )
        \{
            \textcolor{keywordflow}{if} ( in[i] == token )
            \{
                out->push\_back(str);
                str = string();
            \}
            \textcolor{keywordflow}{else}    str.push\_back(in[i]);
        \}

        out->push\_back(str);
    \}



    \textcolor{keyword}{template}<const u\textcolor{keywordtype}{int} NI, const u\textcolor{keywordtype}{int} NO>
    \textcolor{keyword}{static} \textcolor{keywordtype}{void} FindCloseStars (    uint start, uint num, decimal dist,
                                    \hyperlink{classutil_1_1ArrayList}{ArrayList<Star, NI>}& in,
                                    \hyperlink{classutil_1_1ArrayList}{ArrayList}<\hyperlink{classutil_1_1Point}{Point<decimal>}, NO>* out)
    \{
        \textcolor{keywordflow}{for} ( uint i = start; i < in.\hyperlink{classutil_1_1ArrayList_ae098e879892c23b682edc4b023a770de}{Size}() && out->Size() < num; i++ )
        \{
            \textcolor{comment}{// The start will always be added because the distance to itself is 0.}
            util::decimal distance = in.\hyperlink{classutil_1_1ArrayList_ac5a4259af59f7bac9df06851c29d9e37}{Get}(start).position.Distance(in.\hyperlink{classutil_1_1ArrayList_ac5a4259af59f7bac9df06851c29d9e37}{Get}(i).position);

            \textcolor{keywordflow}{if} ( distance < dist )
            \{
                out->PushBack(in.\hyperlink{classutil_1_1ArrayList_ac5a4259af59f7bac9df06851c29d9e37}{Get}(i).position);
            \}
        \}
    \}



    \textcolor{keyword}{inline} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} SortByMagnitude ( Star & smaller, Star & larger )
    \{
        \textcolor{keywordflow}{return} smaller.magnitude < larger.magnitude;
    \}



    \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} operator > ( \textcolor{keyword}{const} Star& rhs )\textcolor{keyword}{ const}
\textcolor{keyword}{    }\{
        \textcolor{keywordflow}{return} magnitude > rhs.magnitude;
    \}

\};






\}
\end{DoxyCodeInclude}
 